<?xml version="1.0" encoding="UTF-8"?>
<!-- Created with Jaspersoft Studio version 6.11.0.final using JasperReports Library version 6.11.0-0c4056ccaa4d25a5a8c45672d2f764ea3498bebb  -->
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="sub_report_decor_selection" pageWidth="595" pageHeight="842" whenNoDataType="AllSectionsNoDetail" columnWidth="555" leftMargin="20" rightMargin="20" topMargin="10" bottomMargin="10" uuid="ca5cbc7d-bb58-4189-95b4-cdc2844bc3da">
	<property name="com.jaspersoft.studio.data.defaultdataadapter" value="server_db_28_01.xml"/>
	<property name="com.jaspersoft.studio.data.sql.tables" value=""/>
	<subDataset name="CategoryDataset" uuid="0b83351f-53b6-4c7f-9893-42f27fd7d640">
		<property name="com.jaspersoft.studio.data.sql.tables" value=""/>
		<property name="com.jaspersoft.studio.data.sql.SQLQueryDesigner.sash.w1" value="291"/>
		<property name="com.jaspersoft.studio.data.sql.SQLQueryDesigner.sash.w2" value="709"/>
		<property name="com.jaspersoft.studio.data.defaultdataadapter" value="server_db_28_01.xml"/>
		<parameter name="P_EVENT_MASTER_ID" class="java.lang.Integer"/>
		<queryString language="SQL">
			<![CDATA[SELECT edcs.ser_event_decor_category_selection_id, dcm.txt_decor_category_name, edcs.num_price FROM event_decor_category_selection edcs JOIN decor_category_master dcm ON dcm.ser_decor_category_id = edcs.ser_decor_category_id WHERE edcs.ser_event_master_id = $P{P_EVENT_MASTER_ID} ORDER BY dcm.txt_decor_category_name DESC]]>
		</queryString>
		<field name="ser_event_decor_category_selection_id" class="java.lang.Integer">
			<property name="com.jaspersoft.studio.field.label" value="ser_event_decor_category_selection_id"/>
			<property name="com.jaspersoft.studio.field.tree.path" value="event_decor_category_selection"/>
		</field>
		<field name="txt_decor_category_name" class="java.lang.String">
			<property name="com.jaspersoft.studio.field.label" value="txt_decor_category_name"/>
			<property name="com.jaspersoft.studio.field.tree.path" value="decor_category_master"/>
		</field>
		<field name="num_price" class="java.math.BigDecimal">
			<property name="com.jaspersoft.studio.field.label" value="num_price"/>
			<property name="com.jaspersoft.studio.field.tree.path" value="event_decor_category_selection"/>
		</field>
	</subDataset>
	<subDataset name="DecorPropertyDataset" uuid="cf5ce5d2-a040-42f9-9546-d8d743ef67fa">
		<property name="com.jaspersoft.studio.data.sql.tables" value=""/>
		<property name="com.jaspersoft.studio.data.sql.SQLQueryDesigner.sash.w1" value="244"/>
		<property name="com.jaspersoft.studio.data.sql.SQLQueryDesigner.sash.w2" value="745"/>
		<property name="com.jaspersoft.studio.data.defaultdataadapter" value="server_db_28_01.xml"/>
		<parameter name="P_EVENT_DECOR_CATEGORY_SELECTION_ID" class="java.lang.Integer"/>
		<queryString language="SQL">
			<![CDATA[SELECT edps.ser_event_decor_property_id, edps.num_price, dpm.txt_property_name, dpm.txt_input_type, dpv.txt_property_value, dpvd.file_path FROM event_decor_property_selection edps JOIN decor_category_property_master dpm ON dpm.ser_property_id = edps.ser_property_id LEFT JOIN decor_category_property_value dpv ON dpv.ser_property_value_id = edps.ser_property_value_id LEFT JOIN decor_category_property_value_document dpvd ON dpvd.ser_document_id = dpv.ser_document_id WHERE edps.ser_event_decor_category_selection_id = $P{P_EVENT_DECOR_CATEGORY_SELECTION_ID} ORDER BY dpm.txt_property_name]]>
		</queryString>
		<field name="ser_event_decor_property_id" class="java.lang.Integer">
			<property name="com.jaspersoft.studio.field.label" value="ser_event_decor_property_id"/>
			<property name="com.jaspersoft.studio.field.tree.path" value="event_decor_property_selection"/>
		</field>
		<field name="num_price" class="java.math.BigDecimal">
			<property name="com.jaspersoft.studio.field.label" value="num_price"/>
			<property name="com.jaspersoft.studio.field.tree.path" value="event_decor_property_selection"/>
		</field>
		<field name="txt_property_name" class="java.lang.String">
			<property name="com.jaspersoft.studio.field.label" value="txt_property_name"/>
			<property name="com.jaspersoft.studio.field.tree.path" value="decor_category_property_master"/>
		</field>
		<field name="txt_input_type" class="java.lang.String">
			<property name="com.jaspersoft.studio.field.label" value="txt_input_type"/>
			<property name="com.jaspersoft.studio.field.tree.path" value="decor_category_property_master"/>
		</field>
		<field name="txt_property_value" class="java.lang.String">
			<property name="com.jaspersoft.studio.field.label" value="txt_property_value"/>
			<property name="com.jaspersoft.studio.field.tree.path" value="decor_category_property_value"/>
		</field>
		<field name="file_path" class="java.lang.String">
			<property name="com.jaspersoft.studio.field.label" value="file_path"/>
			<property name="com.jaspersoft.studio.field.tree.path" value="decor_category_property_value_document"/>
		</field>
	</subDataset>
	<parameter name="P_EVENT_MASTER_ID" class="java.lang.Integer">
		<defaultValueExpression><![CDATA[103]]></defaultValueExpression>
	</parameter>
	<queryString language="plsql">
		<![CDATA[SELECT 
    COALESCE(category_total, 0) + COALESCE(property_total, 0) AS total_decor_price
FROM (
    -- Sum of all category prices
    SELECT SUM(num_price) AS category_total
    FROM event_decor_category_selection
    WHERE ser_event_master_id = $P{P_EVENT_MASTER_ID}
) cat_sum,
(
    -- Sum of all property prices linked to categories of this event
    SELECT SUM(edps.num_price) AS property_total
    FROM event_decor_category_selection edcs
    JOIN event_decor_property_selection edps
        ON edps.ser_event_decor_category_selection_id = edcs.ser_event_decor_category_selection_id
    WHERE edcs.ser_event_master_id = $P{P_EVENT_MASTER_ID}
) prop_sum;]]>
	</queryString>
	<field name="total_decor_price" class="java.math.BigDecimal">
		<property name="com.jaspersoft.studio.field.label" value="total_decor_price"/>
	</field>
	<background>
		<band splitType="Stretch"/>
	</background>
	<columnHeader>
		<band height="68" splitType="Stretch">
			<staticText>
				<reportElement x="-15" y="30" width="100" height="30" forecolor="#404040" uuid="f9bb8386-cee1-449f-b9a0-fd34721de848"/>
				<textElement verticalAlignment="Middle">
					<font fontName="Jost" size="8"/>
				</textElement>
				<text><![CDATA[Decor]]></text>
			</staticText>
		</band>
	</columnHeader>
	<detail>
		<band height="95" splitType="Stretch">
			<frame>
				<reportElement x="-15" y="2" width="555" height="92" uuid="e145f5e9-5fb9-4f9f-ac79-7668c1193fca">
					<property name="com.jaspersoft.studio.unit.x" value="pixel"/>
					<property name="com.jaspersoft.studio.unit.width" value="px"/>
				</reportElement>
				<box leftPadding="2" rightPadding="2">
					<pen lineWidth="0.5" lineColor="#F1F2F6"/>
				</box>
				<componentElement>
					<reportElement x="0" y="7" width="550" height="80" uuid="0683c355-fb3e-459f-a96e-c6258950a940">
						<property name="com.jaspersoft.studio.unit.width" value="px"/>
						<property name="com.jaspersoft.studio.unit.x" value="px"/>
					</reportElement>
					<jr:list xmlns:jr="http://jasperreports.sourceforge.net/jasperreports/components" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports/components http://jasperreports.sourceforge.net/xsd/components.xsd" printOrder="Vertical">
						<datasetRun subDataset="CategoryDataset" uuid="adf19c08-16bc-4dab-beee-9e41b2638f84">
							<datasetParameter name="P_EVENT_MASTER_ID">
								<datasetParameterExpression><![CDATA[$P{P_EVENT_MASTER_ID}]]></datasetParameterExpression>
							</datasetParameter>
							<connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
						</datasetRun>
						<jr:listContents height="80" width="550">
							<textField>
								<reportElement x="24" y="3" width="135" height="18" forecolor="#0033B0" uuid="74417d20-1cc1-4f34-b8ae-c358fa5c86d9">
									<property name="com.jaspersoft.studio.unit.height" value="px"/>
								</reportElement>
								<textElement verticalAlignment="Middle">
									<font fontName="Jost" size="8" isBold="false"/>
								</textElement>
								<textFieldExpression><![CDATA[$F{txt_decor_category_name}]]></textFieldExpression>
							</textField>
							<componentElement>
								<reportElement x="25" y="35" width="520" height="25" uuid="13af0fd4-7b38-4b43-99f9-3376f543381d">
									<property name="com.jaspersoft.studio.unit.height" value="pixel"/>
									<property name="com.jaspersoft.studio.unit.width" value="px"/>
									<property name="com.jaspersoft.studio.unit.x" value="px"/>
								</reportElement>
								<jr:list printOrder="Vertical">
									<datasetRun subDataset="DecorPropertyDataset" uuid="65511408-1be5-48f2-8c23-9bca5f79d1c9">
										<datasetParameter name="P_EVENT_DECOR_CATEGORY_SELECTION_ID">
											<datasetParameterExpression><![CDATA[$F{ser_event_decor_category_selection_id}]]></datasetParameterExpression>
										</datasetParameter>
										<connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
									</datasetRun>
									<jr:listContents height="25" width="520">
										<textField>
											<reportElement x="0" y="5" width="150" height="20" forecolor="#747474" uuid="bd9d9365-7e03-4cf9-b22b-0b42283dc86a">
												<property name="com.jaspersoft.studio.unit.x" value="px"/>
											</reportElement>
											<textElement>
												<font fontName="Jost" size="9"/>
											</textElement>
											<textFieldExpression><![CDATA[$F{txt_property_name}]]></textFieldExpression>
										</textField>
										<textField>
											<reportElement x="160" y="5" width="140" height="20" forecolor="#747474" uuid="c0d01824-f5df-420c-9ad0-14e3cbc8f2fe">
												<property name="com.jaspersoft.studio.unit.x" value="px"/>
											</reportElement>
											<textFieldExpression><![CDATA[$F{txt_property_value}]]></textFieldExpression>
										</textField>
										<textField>
											<reportElement x="450" y="5" width="70" height="20" forecolor="#747474" uuid="24da3390-54d9-48b3-b537-05328f66754e">
												<property name="com.jaspersoft.studio.unit.y" value="px"/>
												<property name="com.jaspersoft.studio.unit.x" value="px"/>
												<property name="com.jaspersoft.studio.unit.width" value="px"/>
											</reportElement>
											<textElement>
												<font fontName="Jost" size="8" isBold="false"/>
											</textElement>
											<textFieldExpression><![CDATA[$F{num_price}]]></textFieldExpression>
										</textField>
									</jr:listContents>
								</jr:list>
							</componentElement>
							<line>
								<reportElement x="0" y="31" width="550" height="1" uuid="ff92a4f5-004c-4cae-8c0e-4801e2c1a6bc">
									<property name="com.jaspersoft.studio.unit.y" value="px"/>
									<property name="com.jaspersoft.studio.unit.x" value="px"/>
									<property name="com.jaspersoft.studio.unit.width" value="px"/>
								</reportElement>
								<graphicElement>
									<pen lineWidth="0.5" lineColor="#F1F2F6"/>
								</graphicElement>
							</line>
							<textField>
								<reportElement x="475" y="3" width="70" height="18" forecolor="#0033B0" uuid="176fa5a7-deb4-4a2c-ac7d-200c7827267a">
									<property name="com.jaspersoft.studio.unit.height" value="px"/>
								</reportElement>
								<textElement verticalAlignment="Middle">
									<font fontName="Jost" size="8"/>
								</textElement>
								<textFieldExpression><![CDATA[$F{num_price}]]></textFieldExpression>
							</textField>
						</jr:listContents>
					</jr:list>
				</componentElement>
			</frame>
		</band>
		<band height="108" splitType="Stretch">
			<frame>
				<reportElement x="-15" y="0" width="555" height="36" forecolor="#F1F2F6" uuid="7027d758-3591-4482-962b-89e71ac99724">
					<property name="com.jaspersoft.studio.unit.y" value="px"/>
					<property name="com.jaspersoft.studio.unit.x" value="px"/>
					<property name="com.jaspersoft.studio.unit.width" value="px"/>
				</reportElement>
				<rectangle>
					<reportElement positionType="FixRelativeToBottom" x="0" y="0" width="555" height="36" forecolor="#F1F2F6" backcolor="#F9F5FD" uuid="a7f02ae7-73bc-4c65-91fd-aead6aaaee81">
						<property name="com.jaspersoft.studio.unit.width" value="px"/>
						<property name="com.jaspersoft.studio.unit.y" value="px"/>
					</reportElement>
				</rectangle>
				<staticText>
					<reportElement x="26" y="10" width="100" height="17" forecolor="#0033B0" uuid="15216f3c-f37d-419e-a21f-4d7267a1b533"/>
					<textElement textAlignment="Left" verticalAlignment="Middle">
						<font fontName="Jost" size="8"/>
					</textElement>
					<text><![CDATA[Decor Sub Total]]></text>
				</staticText>
				<textField>
					<reportElement x="476" y="10" width="70" height="17" forecolor="#0033B0" uuid="6614f1d1-4b3c-4b18-897d-361d601eed23"/>
					<textElement verticalAlignment="Middle">
						<font fontName="Jost" size="8"/>
					</textElement>
					<textFieldExpression><![CDATA[$F{total_decor_price}]]></textFieldExpression>
				</textField>
			</frame>
			<frame>
				<reportElement x="-15" y="36" width="555" height="36" forecolor="#F1F2F6" uuid="b13ea7d0-cb37-41c3-915c-c72b1feda150">
					<property name="com.jaspersoft.studio.unit.x" value="px"/>
					<property name="com.jaspersoft.studio.unit.y" value="px"/>
					<property name="com.jaspersoft.studio.unit.width" value="px"/>
				</reportElement>
				<rectangle>
					<reportElement positionType="FixRelativeToBottom" x="0" y="0" width="555" height="36" forecolor="#F1F2F6" backcolor="#F4ECFB" uuid="57d8a71f-2fe7-4779-9f3e-04c9a4db95a1">
						<property name="com.jaspersoft.studio.unit.width" value="px"/>
						<property name="com.jaspersoft.studio.unit.x" value="px"/>
						<property name="com.jaspersoft.studio.unit.y" value="px"/>
					</reportElement>
				</rectangle>
			</frame>
			<frame>
				<reportElement x="-15" y="72" width="555" height="36" forecolor="#F1F2F6" uuid="d2041541-d092-428e-ab4d-3a8706a0259e">
					<property name="com.jaspersoft.studio.unit.x" value="px"/>
					<property name="com.jaspersoft.studio.unit.y" value="px"/>
					<property name="com.jaspersoft.studio.unit.width" value="px"/>
				</reportElement>
				<rectangle>
					<reportElement positionType="FixRelativeToBottom" x="0" y="0" width="555" height="36" forecolor="#F1F2F6" backcolor="#ECE0F8" uuid="50a27216-bcc1-466c-ac04-42d3479e7060">
						<property name="com.jaspersoft.studio.unit.y" value="px"/>
						<property name="com.jaspersoft.studio.unit.width" value="px"/>
					</reportElement>
				</rectangle>
			</frame>
		</band>
	</detail>
</jasperReport>
